# XXX: The syntax devd.conf(5) uses is rather weird, and there is no point
#      in trying to parse it using confctl(1), imho.

$ rm -f d
$ cp devd.conf d

$ ../src/confctl -CSa d
> options.directory="/etc/devd"
> options.directory="/usr/local/etc/devd"
> options.pid-file="/var/run/devd.pid"
> options.set=scsi-controller-regex\n		"(aac|adv|adw|aha|ahb|ahc|ahd|aic|amd|amr|asr|bt|ciss|ct|dpt|\\\n		esp|ida|iir|ips|isp|mlx|mly|mpt|ncr|ncv|nsp|stg|sym|trm|wds)\\\n		[0-9]+"
> notify.0.match="system"		"IFNET"
> notify.0.match="subsystem"	"!usbus[0-9]+"
> notify.0.match="type"		"ATTACH"
> notify.0.action="/etc/pccard_ether $subsystem start"
> notify.0.match="system"		"IFNET"
> notify.0.match="type"		"LINK_UP"
> notify.0.media-type="ethernet"
> notify.0.action="/etc/rc.d/dhclient quietstart $subsystem"
> detach.0.media-type="802.11"
> detach.0.action="/etc/pccard_ether $device-name stop"
> attach.0.media-type="802.11"
> attach.0.action="/etc/pccard_ether $device-name start"
> notify.0.match="system"		"IFNET"
> notify.0.match="type"		"LINK_UP"
> notify.0.media-type="802.11"
> notify.0.action="/etc/rc.d/dhclient quietstart $subsystem"
> attach.100.device-name="ed50"
> attach.100.action="ifconfig $device-name inet 1.2.3.4 netmask 0xffff0000"
> detach.100.device-name="ed50"
> attach.100.device-name="ubt[0-9]+"
> attach.100.action="/etc/rc.d/bluetooth quietstart $device-name"
> detach.100.device-name="ubt[0-9]+"
> detach.100.action="/etc/rc.d/bluetooth quietstop $device-name"
> attach.100.device-name="ukbd0"
> attach.100.action="/etc/rc.d/syscons setkeyboard /dev/ukbd0"
> detach.100.device-name="ukbd0"
> detach.100.action="/etc/rc.d/syscons setkeyboard /dev/kbd0"
> attach.100.device-name="ums[0-9]+"
> attach.100.action="/etc/rc.d/moused quietstart $device-name"
> detach.100.device-name="ums[0-9]+"
> detach.100.action="/etc/rc.d/moused stop $device-name"
> attach.100.match="vendor"	"0x0854"
> attach.100.match="product"	"0x0100"
> attach.100.match="release"	"0x0000"
> attach.100.action="/usr/local/bin/ezdownload -f /usr/local/share/usb/firmware/0854.0100.0_01.hex $device-name"
> attach.100.match="vendor"	"0x1645"
> attach.100.match="product"	"0x8001"
> attach.100.match="release"	"0x0101"
> attach.100.action="if ! kldstat -n usio > /dev/null 2>&1 ; then kldload usio; fi; /usr/sbin/ezdownload -v -f /usr/share/usb/firmware/1645.8001.0101 /dev/$device-name"
> notify.100.match="system"		"USB"
> notify.100.match="subsystem"	"DEVICE"
> notify.100.match="type"		"ATTACH"
> notify.100.match="vendor"		"0x082d"
> notify.100.match="product"		"0x0100"
> notify.100.match="release"		"0x0100"
> notify.100.action="/usr/local/bin/coldsync -md -p /dev/$cdev -t usb"
> attach.0.device-name="$scsi-controller-regex"
> nomatch.10.match="bus" "uhub[0-9]+"
> nomatch.10.action="logger Unknown USB device: vendor $vendor product $product \\\n		bus $bus"
> nomatch.20.match="bus" "pccard[0-9]+"
> nomatch.20.match="manufacturer" "0xffffffff"
> nomatch.20.match="product" "0xffffffff"
> nomatch.20.action="logger Unknown PCCARD device: CISproduct $cisproduct \\\n		CIS-vendor $cisvendor bus $bus"
> nomatch.10.match="bus" "pccard[0-9]+"
> nomatch.10.action="logger Unknown PCCARD device: manufacturer $manufacturer \\\n		product $product CISproduct $cisproduct CIS-vendor \\\n		$cisvendor bus $bus"
> nomatch.10.match="bus" "cardbus[0-9]+"
> nomatch.10.action="logger Unknown Cardbus device: device $device class $class \\\n		vendor $vendor bus $bus"
> notify.10.match="system"		"ACPI"
> notify.10.match="subsystem"	"ACAD"
> notify.10.action="/etc/rc.d/power_profile $notify"
> notify.10.match="system"		"ACPI"
> notify.10.match="subsystem"	"Thermal"
> notify.10.match="notify"		"0xcc"
> notify.10.action="logger -p kern.emerg 'WARNING: system temperature too high, shutting down soon!'"
> notify.10.match="system"		"ZFS"
> notify.10.match="type"		"zpool"
> notify.10.action="logger -p kern.err 'ZFS: failed to load zpool $pool'"
> notify.10.match="system"		"ZFS"
> notify.10.match="type"		"vdev"
> notify.10.action="logger -p kern.err 'ZFS: vdev failure, zpool=$pool type=$type'"
> notify.10.match="system"		"ZFS"
> notify.10.match="type"		"data"
> notify.10.action="logger -p kern.warn 'ZFS: zpool I/O failure, zpool=$pool error=$zio_err'"
> notify.10.match="system"		"ZFS"
> notify.10.match="type"		"io"
> notify.10.action="logger -p kern.warn 'ZFS: vdev I/O failure, zpool=$pool path=$vdev_path offset=$zio_offset size=$zio_size error=$zio_err'"
> notify.10.match="system"		"ZFS"
> notify.10.match="type"		"checksum"
> notify.10.action="logger -p kern.warn 'ZFS: checksum mismatch, zpool=$pool path=$vdev_path offset=$zio_offset size=$zio_size'"
> notify.10.match="system"		"ACPI"
> notify.10.match="subsystem"	"Suspend"
> notify.10.action="/etc/rc.suspend acpi $notify"
> notify.10.match="system"		"ACPI"
> notify.10.match="subsystem"	"Resume"
> notify.10.action="/etc/rc.resume acpi $notify"

$ rm -f d
